<!--
  ~ MIT License
  ~
  ~ Copyright (c) 2022 dong4j <dong4j@gmail.com>
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in all
  ~ copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  ~ SOFTWARE.
  -->

<!--suppress PluginXmlI18n -->
<idea-plugin>
    <id>info.dong4j.idea.plugin.markdown.image.kit</id>
    <name>Markdown Image Kit</name>
    <vendor email="dong4j@gmail.com" url="https://github.com/dong4j/markdown-image-kit">dong4j</vendor>

    <!-- please see https://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
    on how to target different products -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- clipboard -->
        <editorActionHandler action="EditorPaste"
                             implementationClass="info.dong4j.idea.plugin.action.paste.PasteImageAction"
                             order="first"/>
        <!-- 设置面板 -->
        <applicationConfigurable
                parentId="tools"
                instance="info.dong4j.idea.plugin.settings.NewProjectSettingsPage"
                id="markdown.image.kit.configs"
                displayName="Markdown Image Kit"/>

        <!-- MIK Console 工具窗口 -->
        <toolWindow id="MIK Console"
                    factoryClass="info.dong4j.idea.plugin.console.MikConsoleToolWindowFactory"
                    anchor="bottom"
                    icon="icons.MikIcons.MIK"/>

        <!-- alt + enter -->
        <!--suppress PluginXmlExtensionRegistration -->
        <intentionAction>
            <className>info.dong4j.idea.plugin.action.intention.ImageUploadIntentionAction</className>
            <category>MIK</category>
            <descriptionDirectoryName>ImageUploadIntention</descriptionDirectoryName>
        </intentionAction>
        <!--suppress PluginXmlExtensionRegistration -->
        <intentionAction>
            <className>info.dong4j.idea.plugin.action.intention.ImageMigrationIntentionAction</className>
            <category>MIK</category>
            <descriptionDirectoryName>ImageMoveIntention</descriptionDirectoryName>
        </intentionAction>
        <!--suppress PluginXmlExtensionRegistration -->
        <intentionAction>
            <className>info.dong4j.idea.plugin.action.intention.ImageLabelChangeIntetionAction</className>
            <category>MIK</category>
            <descriptionDirectoryName>ImageLabelChangeIntetion</descriptionDirectoryName>
        </intentionAction>

    </extensions>

    <actions>
        <action id="SmmsObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadSmmsCloudAction"
                popup="true" text="SM.MS">
        </action>
        <action id="AliyunObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadAliyunCloudAction"
                popup="true" text="阿里云">
        </action>
        <action id="QiniuObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadQiniuCloudAction"
                popup="true" text="七牛云">
        </action>
        <action id="TencentObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadTencentCloudAction"
                popup="true" text="腾讯云">
        </action>
        <action id="BaiduObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadBaiduCloudAction"
                popup="true" text="百度云">
        </action>
        <action id="GithubObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadGithubCloudAction"
                popup="true" text="GitHub">
        </action>
        <action id="GiteeObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadGiteeCloudAction"
                popup="true" text="Gitee">
        </action>
        <action id="CustomObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadCustomCloudAction"
                popup="true" text="自定义">
        </action>
        <action id="PicListObjectStorageServiceAction" class="info.dong4j.idea.plugin.action.menu.markdown.UploadPicListCloudAction"
                popup="true" text="PicList/PicGo">
        </action>

        <action id="ImageCompressAction" class="info.dong4j.idea.plugin.action.menu.image.ImageCompressAction"
                popup="true" text="图片压缩">
        </action>
        <!-- 仅上传图片, 上传成功后会将 menu 图片标签回写到剪切板 -->
        <action id="ImageUploadAction" class="info.dong4j.idea.plugin.action.menu.image.ImageUploadAction"
                popup="true" text="图片上传">
        </action>
        <action id="MoveToOtherStorageAction" class="info.dong4j.idea.plugin.action.menu.ImageMigrationAction"
                popup="true" text="图床迁移">
        </action>

        <action id="ChangeLabelAction" class="info.dong4j.idea.plugin.action.menu.ImageLabelChangeAction"
                popup="true" text="替换标签">
        </action>


        <group popup="true" id="info.dong4j.idea.plugin.markdown.image.kit"
               class="info.dong4j.idea.plugin.action.menu.MikGroupAction"
               text="Markdown Image Kit">
            <reference ref="PicListObjectStorageServiceAction"/>
            <reference ref="SmmsObjectStorageServiceAction"/>
            <reference ref="AliyunObjectStorageServiceAction"/>
            <reference ref="QiniuObjectStorageServiceAction"/>
            <reference ref="TencentObjectStorageServiceAction"/>
            <reference ref="BaiduObjectStorageServiceAction"/>
            <reference ref="GithubObjectStorageServiceAction"/>
            <reference ref="GiteeObjectStorageServiceAction"/>
            <reference ref="CustomObjectStorageServiceAction"/>
            <separator/>
            <reference ref="ImageCompressAction"/>
            <reference ref="ImageUploadAction"/>
            <separator/>
            <reference ref="ChangeLabelAction"/>
            <reference ref="MoveToOtherStorageAction"/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <add-to-group group-id="MainToolBar" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </group>

        <!-- 编辑器右键菜单 -->
        <group popup="true" id="info.dong4j.idea.plugin.editor.popup.menu.group" text="Markdown Image Kit"
               icon="icons.MikIcons.MIK">
            <reference ref="PicListObjectStorageServiceAction"/>
            <reference ref="SmmsObjectStorageServiceAction"/>
            <reference ref="AliyunObjectStorageServiceAction"/>
            <reference ref="QiniuObjectStorageServiceAction"/>
            <reference ref="TencentObjectStorageServiceAction"/>
            <reference ref="BaiduObjectStorageServiceAction"/>
            <reference ref="GithubObjectStorageServiceAction"/>
            <reference ref="GiteeObjectStorageServiceAction"/>
            <reference ref="CustomObjectStorageServiceAction"/>
            <separator/>
            <reference ref="ImageCompressAction"/>
            <reference ref="ImageUploadAction"/>
            <separator/>
            <reference ref="ChangeLabelAction"/>
            <reference ref="MoveToOtherStorageAction"/>
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </group>

    </actions>
</idea-plugin>
